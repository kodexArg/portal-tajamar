{% extends "base.html" %}

{% block title %}Subir Archivo{% endblock %}

{% block content %}
<div class="content">
    <h1 class="title has-text-centered">Subir un Archivo</h1>
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="file has-name is-centered">
            <label class="file-label">
                <input class="file-input" type="file" name="file" required>
                <span class="file-cta">
                    <span class="file-icon">
                        <i class="fas fa-upload"></i>
                    </span>
                    <span class="file-label">
                        Elige un archivo…
                    </span>
                </span>
                <span class="file-name" id="file-name">
                    Ningún archivo seleccionado
                </span>
            </label>
        </div>
        <br>
        <button class="button is-primary mt-2" type="submit">Subir archivo</button>
    </form>

    {% if file_url %}
    <div class="notification is-success mt-4">
        Archivo subido exitosamente.
    </div>
    <img src="{{ file_url }}" style="max-width: 300px; max-height: 300px; display: block; margin: auto;">
    {% endif %}
</div>

<script>
    document.querySelector('.file-input').addEventListener('change', function() {
        const fileName = document.getElementById('file-name');
        if (this.files && this.files.length > 0) {
            fileName.textContent = this.files[0].name;
        } else {
            fileName.textContent = 'Ningún archivo seleccionado';
        }
    });
</script>
{% endblock %}
